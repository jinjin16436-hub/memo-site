<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>부광고 웹 한국</title><link rel="stylesheet" href="style.css?v=1.1.10">
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <script src="env.js?v=1.1.10"></script>  <!-- ★ 여기 버전 붙이기 -->
  <script src="app.js?v=1.1.10"></script> <!-- 이왕이면 app.js도 캐시 방지 -->
</head>
<body>
  <header class="topbar">
    <h1>사이트 버전 v1.1.10 (부광고.웹.한국)</h1>
    <div class="auth">
      <span id="userInfo">로그인 필요</span>
      <button id="loginBtn" class="btn">로그인</button>
      <button id="logoutBtn" class="btn" style="display:none">로그아웃</button>
    </div>
  </header>

  <div class="container">

    <!-- 전달 사항 -->
    <section id="sec_notice" class="sec">
      <div class="section-head">
        <h2>📢 중요 전달 사항</h2>
        <label class="row"><input type="checkbox" id="toggleNotices"> 표시</label>
      </div>
      <div class="section-body">
        <ul id="list_notice" class="card-list"></ul>

        <div class="admin-only task-form">
          <div class="f"><label class="label">제목</label><input id="nTitle" placeholder="제목을 입력하세요"></div>
          <div class="f"><label class="label">분류</label>
            <select id="nKind">
              <option value="notice">공지(빨강)</option>
              <option value="info">안내(노랑)</option>
              <option value="alert">참고(초록)</option>
            </select>
          </div>
          <div class="f col-span-12">
            <label class="label">내용</label>
            <textarea id="nBody" placeholder="내용 (줄바꿈 가능)"></textarea>
          </div>
          <div class="f col-end"><button id="nAddBtn" class="btn btn--primary w-full">+ 추가</button></div>
        </div>
      </div>
    </section>

    <!-- 시험 -->
    <section class="sec">
      <div class="section-head"><h2>📝 시험</h2></div>
      <div class="section-body">
        <ul id="list_exam" class="card-list"></ul>

        <div class="admin-only task-form">
          <div class="f col-span-6"><label class="label">시험 이름</label><input id="eName" placeholder="예: 2학기 중간고사"></div>
          <div class="f col-span-6"><label class="label">상세</label><input id="eDetail" placeholder="예: 범위/유의사항 등"></div>

          <div class="f"><label class="label">시작일</label><input id="eStart" type="date"></div>
          <div class="f"><label class="label">종료일</label><input id="eEnd" type="date"></div>
          <div class="f"><label class="label">교시 시작</label>
            <select id="ePStart"><option value="">선택</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option></select>
          </div>
          <div class="f"><label class="label">교시 끝</label>
            <select id="ePEnd"><option value="">선택</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option></select>
          </div>

          <div class="f col-end"><label class="label">&nbsp;</label><button id="eAddBtn" class="btn btn--primary w-full">+ 추가</button></div>
        </div>
      </div>
    </section>

    <!-- 수행평가 -->
    <section class="sec">
      <div class="section-head"><h2>📄 수행평가</h2></div>
      <div class="section-body">
        <ul id="list_task" class="card-list"></ul>

        <!-- 3줄 레이아웃 -->
        <div class="admin-only task-form layout-3row">
          <!-- 1열: 과목 / 내용(조금 더 넓음) -->
          <div class="f r1-subj">
            <label class="label">과목</label>
            <input id="tSubj" placeholder="예: 국어">
          </div>
          <div class="f r1-content">
            <label class="label">내용</label>
            <input id="tTitle" placeholder="예: 발표 준비">
          </div>

          <!-- 2열: 상세(크게) -->
          <div class="f r2-detail">
            <label class="label">상세</label>
            <textarea id="tDetail" placeholder="상세 지시사항"></textarea>
          </div>

          <!-- 3열: 시작일 / 종료일 / 교시 시작 / 교시 끝 -->
          <div class="f r3-item"><label class="label">시작일</label><input id="tStart" type="date"></div>
          <div class="f r3-item"><label class="label">종료일</label><input id="tEnd" type="date"></div>
          <div class="f r3-item"><label class="label">교시 시작</label>
            <select id="tPStart"><option value="">선택</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option></select>
          </div>
          <div class="f r3-item"><label class="label">교시 끝</label>
            <select id="tPEnd"><option value="">선택</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option></select>
          </div>

          <div class="f col-end"><label class="label">&nbsp;</label><button id="tAddBtn" class="btn btn--primary w-full">+ 추가</button></div>
        </div>
      </div>
    </section>

    <!-- 숙제 -->
    <section class="sec">
      <div class="section-head"><h2>📌 숙제</h2></div>
      <div class="section-body">
        <ul id="list_homework" class="card-list"></ul>

        <!-- 3줄 레이아웃 -->
        <div class="admin-only task-form layout-3row">
          <!-- 1열: 과목 / 내용(조금 더 넓음) -->
          <div class="f r1-subj">
            <label class="label">과목</label>
            <input id="hSubj" placeholder="예: 수학">
          </div>
          <div class="f r1-content">
            <label class="label">내용</label>
            <input id="hTitle" placeholder="예: 문제집 50~80쪽">
          </div>

          <!-- 2열: 상세(크게) -->
          <div class="f r2-detail">
            <label class="label">상세</label>
            <textarea id="hDetail" placeholder="상세 지시사항"></textarea>
          </div>

          <!-- 3열: 시작일 / 종료일 / 교시 시작 / 교시 끝 -->
          <div class="f r3-item"><label class="label">시작일</label><input id="hStart" type="date"></div>
          <div class="f r3-item"><label class="label">종료일</label><input id="hEnd" type="date"></div>
          <div class="f r3-item"><label class="label">교시 시작</label>
            <select id="hPStart"><option value="">선택</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option></select>
          </div>
          <div class="f r3-item"><label class="label">교시 끝</label>
            <select id="hPEnd"><option value="">선택</option><option>1</option><option>2</option><option>3</option><option>4</option><option>5</option><option>6</option><option>7</option></select>
          </div>

          <div class="f col-end"><label class="label">&nbsp;</label><button id="hAddBtn" class="btn btn--primary w-full">+ 추가</button></div>
        </div>
      </div>
    </section>

    <!-- 시간표(NEIS) -->
    <section class="sec">
      <div class="section-head"><h2>📚 시간표 (NEIS 프록시)</h2></div>
      <div class="section-body">
        <div class="task-form compact">
          <div class="f col-span-5"><label class="label">학교명</label><input id="ttSchool" placeholder="예: 부광고"></div>
          <div class="f"><label class="label">날짜</label><input id="ttDate" type="date"></div>
          <div class="f"><label class="label">학년</label><input id="ttGrade" type="number" min="1" max="3" placeholder="1~3"></div>
          <div class="f"><label class="label">반</label><input id="ttClass" type="number" min="1" max="30" placeholder="1~30"></div>
          <div class="f col-end"><label class="label">&nbsp;</label><button id="ttBtn" class="btn btn--primary w-full">불러오기</button></div>
        </div>
        <ul id="ttList" class="card-list" style="margin-top:16px"></ul>
        <div class="meta">* env.js의 <code>NEIS_PROXY_BASE</code>에 Worker URL을 넣어야 동작합니다.</div>
      </div>
    </section>

  </div>

  <div id="modal-root"></div>
  <script src="app.js?v=1.1.10"></script>
</body>
</html>
