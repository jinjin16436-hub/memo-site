<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>부광고 1-1</title>

  <link rel="stylesheet" href="style.css?v=20">

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <!-- 환경변수 -->
  <script src="env.js?v=20"></script>

  <!-- 앱 -->
  <script defer src="app.js?v=20"></script>
</head>
<body>
  <header class="topbar">
    <h1>사이트 버전 v1.1.1 (부광고.웹.한국)</h1>
    <div class="auth">
      <span id="userInfoBox" class="muted"></span>
      <button id="loginBtn" class="btn">로그인</button>
      <button id="logoutBtn" class="btn" style="display:none">로그아웃</button>
    </div>
  </header>

  <main class="container">

    <!-- ===== 중요 전달 사항 ===== -->
    <section id="sec_notice" class="sec" data-sec="notice">
      <div class="section-head row-between">
        <div class="row gap-8"><span style="font-size:20px">📢</span><span>중요 전달 사항</span></div>
        <label class="switch">
          <input id="noticeToggle" type="checkbox" checked><span class="slider round"></span>
        </label>
      </div>
      <div class="section-body open">
        <ul id="notice_list" class="card-list"></ul>

        <!-- 관리자만 보이는 공지 추가 (※ id는 app.js와 일치) -->
        <div id="noticeAddRow" class="add-row col gap-8" style="display:none">
          <div class="grid-2">
            <input id="nTitle" class="input subj" type="text" placeholder="제목" />
            <select id="nKind" class="select">
              <option value="notice">공지(빨강)</option>
              <option value="info">안내(노랑)</option>
              <option value="alert">알림(초록)</option>
            </select>
          </div>
          <textarea id="nBody" class="detail" rows="4" placeholder="내용 (줄바꿈 가능)"></textarea>
          <button id="nAddBtn" class="btn btn--primary align-end">+ 추가</button>
        </div>
      </div>
    </section>

    <!-- ===== 시험 ===== -->
    <section class="sec">
      <button class="section-head" onclick="toggleSection('sec_exam')">🧪 시험 ▾</button>
      <div id="sec_exam" class="section-body open">
        <ul id="list_exam" class="card-list"></ul>

        <!-- 관리자만 보이는 추가폼 -->
        <div class="add-row" data-cat="exam" style="display:none">
          <input class="subj" type="text" placeholder="과목" />
          <input class="text" type="text" placeholder="내용" />
          <textarea class="detail" rows="4" placeholder="상세 내용"></textarea>
          <div class="grid-3">
            <input class="date-start" type="date" />
            <input class="date-end" type="date" />
            <input class="period" type="text" placeholder="교시" />
          </div>
          <button class="btn btn--primary add align-end">+ 추가</button>
        </div>
      </div>
    </section>

    <!-- ===== 수행평가 ===== -->
    <section class="sec">
      <button class="section-head" onclick="toggleSection('sec_perf')">📝 수행평가 ▾</button>
      <div id="sec_perf" class="section-body open">
        <ul id="list_perf" class="card-list"></ul>
        <div class="add-row" data-cat="perf" style="display:none">
          <input class="subj" type="text" placeholder="과목" />
          <input class="text" type="text" placeholder="내용" />
          <textarea class="detail" rows="4" placeholder="상세 내용"></textarea>
          <div class="grid-3">
            <input class="date-start" type="date" />
            <input class="date-end" type="date" />
            <input class="period" type="text" placeholder="교시" />
          </div>
          <button class="btn btn--primary add align-end">+ 추가</button>
        </div>
      </div>
    </section>

    <!-- ===== 숙제 ===== -->
    <section class="sec">
      <button class="section-head" onclick="toggleSection('sec_home')">📌 숙제 ▾</button>
      <div id="sec_home" class="section-body open">
        <ul id="list_home" class="card-list"></ul>
        <div class="add-row" data-cat="home" style="display:none">
          <input class="subj" type="text" placeholder="과목" />
          <input class="text" type="text" placeholder="내용" />
          <textarea class="detail" rows="4" placeholder="상세 내용"></textarea>
          <div class="grid-3">
            <input class="date-start" type="date" />
            <input class="date-end" type="date" />
            <input class="period" type="text" placeholder="교시" />
          </div>
          <button class="btn btn--primary add align-end">+ 추가</button>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== 과제 수정 모달 ===== -->
  <div id="editModal" class="modal">
    <div class="modal__dialog">
      <div class="modal__head">
        <strong>항목 수정</strong>
        <button class="modal__close" id="editClose">×</button>
      </div>
      <div class="modal__body">
        <div class="form-grid">
          <label class="full">과목<input id="mSubj" type="text"/></label>
          <label class="full">내용<input id="mText" type="text"/></label>
          <label class="full">상세 내용<textarea id="mDetail" rows="6"></textarea></label>
          <label>시작일<input id="mDateStart" type="date"/></label>
          <label>종료일<input id="mDateEnd" type="date"/></label>
          <label>교시<input id="mPeriod" type="text"/></label>
        </div>
      </div>
      <div class="modal__foot">
        <button id="editSave" class="btn btn--primary">저장</button>
        <button id="editCancel" class="btn btn--ghost">취소</button>
      </div>
    </div>
  </div>

  <!-- ===== 공지 수정 모달 ===== -->
  <div id="noticeEditModal" class="modal">
    <div class="modal__dialog">
      <div class="modal__head">
        <strong>공지 수정</strong>
        <button class="modal__close" id="nEditClose">×</button>
      </div>
      <div class="modal__body">
        <div class="form-grid">
          <label class="full">제목<input id="nEditTitle" type="text" /></label>
          <label>종류
            <select id="nEditKind">
              <option value="notice">공지(빨강)</option>
              <option value="info">안내(노랑)</option>
              <option value="alert">알림(초록)</option>
            </select>
          </label>
          <label class="full">내용<textarea id="nEditBody" rows="8"></textarea></label>
        </div>
      </div>
      <div class="modal__foot">
        <button id="nEditSave" class="btn btn--primary">저장</button>
        <button id="nEditCancel" class="btn btn--ghost">취소</button>
      </div>
    </div>
  </div>
</body>
</html>
