<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>내 메모 사이트</title>
  <link rel="stylesheet" href="style.css?v=17"/>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-firestore-compat.js"></script>
  <script src="env.js?v=17"></script>
</head>
<body>
  <header>
    <h1>내 메모 사이트</h1>
    <div class="auth">
      <button id="loginBtn" class="btn">로그인</button>
      <button id="logoutBtn" class="btn">로그아웃</button>
    </div>
  </header>

  <main>
    <!-- 중요 전달 사항 -->
    <section id="sec_notice">
      <h2>
        중요 전달 사항
        <label><input type="checkbox" id="noticeToggle" checked/> 표시</label>
      </h2>
      <ul id="notice_list" class="card-list"></ul>

      <!-- 관리자만 보이는 공지 추가 -->
      <div id="noticeAddRow" class="add-row">
        <input id="nTitle" class="subj" placeholder="제목"/>
        <select id="nKind">
          <option value="notice">공지(빨강)</option>
          <option value="info">안내(노랑)</option>
          <option value="alert">알림(초록)</option>
        </select>
        <textarea id="nBody" placeholder="내용"></textarea>
        <button id="nAddBtn" class="btn">추가</button>
      </div>
    </section>

    <!-- 시험 -->
    <section id="sec_exam">
      <h2 onclick="toggleSection('sec_exam')">시험</h2>
      <ul id="list_exam" class="card-list"></ul>
      <div class="add-row" data-cat="exam">
        <input class="subj" placeholder="과목"/>
        <input class="text" placeholder="내용"/>
        <textarea class="detail" placeholder="상세 내용"></textarea>
        <input type="date" class="date-start"/>
        <input type="date" class="date-end"/>
        <input class="period" placeholder="교시"/>
        <button class="btn add">추가</button>
      </div>
    </section>

    <!-- 수행 -->
    <section id="sec_perf">
      <h2 onclick="toggleSection('sec_perf')">수행</h2>
      <ul id="list_perf" class="card-list"></ul>
      <div class="add-row" data-cat="perf">
        <input class="subj" placeholder="과목"/>
        <input class="text" placeholder="내용"/>
        <textarea class="detail" placeholder="상세 내용"></textarea>
        <input type="date" class="date-start"/>
        <input type="date" class="date-end"/>
        <input class="period" placeholder="교시"/>
        <button class="btn add">추가</button>
      </div>
    </section>

    <!-- 숙제 -->
    <section id="sec_home">
      <h2 onclick="toggleSection('sec_home')">숙제</h2>
      <ul id="list_home" class="card-list"></ul>
      <div class="add-row" data-cat="home">
        <input class="subj" placeholder="과목"/>
        <input class="text" placeholder="내용"/>
        <textarea class="detail" placeholder="상세 내용"></textarea>
        <input type="date" class="date-start"/>
        <input type="date" class="date-end"/>
        <input class="period" placeholder="교시"/>
        <button class="btn add">추가</button>
      </div>
    </section>
  </main>

  <!-- ===== 과제 수정 모달 ===== -->
  <div id="editModal" class="modal">
    <div class="modal__dialog">
      <div class="modal__head">
        <strong>항목 수정</strong>
        <button class="modal__close" id="editClose">×</button>
      </div>
      <div class="modal__body">
        <div class="form-grid">
          <label class="full">과목<input id="mSubj" type="text"/></label>
          <label class="full">내용<input id="mText" type="text"/></label>
          <label class="full">상세 내용<textarea id="mDetail" rows="5"></textarea></label>
          <label>시작일<input id="mDateStart" type="date"/></label>
          <label>종료일<input id="mDateEnd" type="date"/></label>
          <label>교시<input id="mPeriod" type="text"/></label>
        </div>
      </div>
      <div class="modal__foot">
        <button id="editSave" class="btn">저장</button>
        <button id="editCancel" class="btn btn--ghost">취소</button>
      </div>
    </div>
  </div>

  <!-- ===== 공지 수정 모달 ===== -->
  <div id="noticeEditModal" class="modal">
    <div class="modal__dialog">
      <div class="modal__head">
        <strong>공지 수정</strong>
        <button class="modal__close" id="nEditClose">×</button>
      </div>
      <div class="modal__body">
        <div class="form-grid">
          <label class="full">제목<input id="nEditTitle" type="text" /></label>
          <label class="full">내용<textarea id="nEditBody" rows="8"></textarea></label>
          <label class="full">종류
            <select id="nEditKind">
              <option value="notice">공지(빨강)</option>
              <option value="info">안내(노랑)</option>
              <option value="alert">알림(초록)</option>
            </select>
          </label>
        </div>
      </div>
      <div class="modal__foot">
        <button id="nEditSave" class="btn">저장</button>
        <button id="nEditCancel" class="btn btn--ghost">취소</button>
      </div>
    </div>
  </div>

  <script src="app.js?v=17"></script>
</body>
</html>
